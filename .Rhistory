) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
color = "Energy Type"
)
#bar gragh
library(plotly)
pge_residential<-
pge_data %>%
filter(CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential")) %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Residential Yearly Electricity & Gas Usage 2017-2021",
fill = "Energy Type"
)
pge_residential %>%
ggplotly()%>%
layout(
xaxis=list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
pge_residential
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(CUSTOMERCLASS %in% c("Elec- Commercial","Gas- Commercial")) %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
fill = "Energy Type"
)
pge_commercial %>%
ggplotly()%>%
layout(
xaxis=list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
pge_commercial
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(CUSTOMERCLASS %in% c("Elec- Commercial","Gas- Commercial")) %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
fill = "Energy Type"
)
pge_commercial %>%
ggplotly()%>%
layout(
xaxis=list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
pge_commercial
setwd("~/Desktop/GitHub/kflorsheim.github.io")
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(CUSTOMERCLASS %in% c("Elec- Commercial","Gas- Commercial")) %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
fill = "Energy Type"
)
pge_commercial %>%
ggplotly()%>%
layout(
xaxis=list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
pge_commercial
pge_chart
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(CUSTOMERCLASS %in% c("Elec- Commercial","Gas- Commercial")) %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
fill = "Energy Type"
)
pge_commercial %>%
ggplotly()%>%
layout(
xaxis=list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(YEAR %in% ,2019:2020) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(YEAR %in% , (2019:2020) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(YEAR %in% , (2019, 2020) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(YEAR %in% , (2019, 2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(DATE %in% , (2019, 2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(years %in% , (2019, 2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(years, %in% , (2019, 2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(DATE %in% , (2019, 2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(DATE %in% , (2019 2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(DATE %in% , (2019:2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(DATE %in% (2019:2020)) %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
fill = "Energy Type"
)
pge_commercial %>%
ggplotly()%>%
layout(
xaxis=list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(DATE %in% (2019 2020)) %>%
#bar gragh
library(plotly)
pge_commercial<-
pge_data %>%
filter(DATE %in% (2019)) %>%
ggplot() +
geom_bar(
aes(
x = DATE,
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
fill = "Energy Type"
)
pge_commercial %>%
ggplotly()%>%
layout(
xaxis=list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
knitr::opts_chunk$set(echo = TRUE)
years <- 2019:2020
quarters <- 1:4
types <- c("Electric","Gas")
pge_data_raw <- NULL
for(year in years){
for(quarter in quarters){
for(type in types){
filename <-
paste0(
"PGE_",
year,
"_Q",
quarter,
"_",
type,
"UsageByZip.csv"
)
if(!file.exists(filename)) next
temp <- read_csv(filename)
if(type == "Electric"){
temp<-
temp%>%
#conversion: 1 kWH = 3.41213 kBTU
mutate(TOTALKBTU =  TOTALKWH*3.41214)%>%
select(-TOTALKWH, -AVERAGEKWH)
}
if(type == "Gas") {
temp <-
temp %>%
#conversion: 1 Therm = 99.9761 kBTU
mutate(TOTALKBTU = TOTALTHM * 99.9761) %>%
select(-TOTALTHM, -AVERAGETHM)
}
pge_data_raw <-
rbind(pge_data_raw,temp)
}
}
}
pge_data <-
pge_data_raw %>%
filter(
CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential","Elec- Commercial","Gas- Commercial")
) %>%
group_by(
YEAR,
MONTH,
CUSTOMERCLASS
) %>%
summarize(
TOTALKBTU = sum(TOTALKBTU, na.rm = T)
) %>%
mutate(
DATE =
paste(
YEAR,
MONTH,
"01",
sep="-"
) %>% as.Date()
)
library(tidyverse)
pge_data <-
pge_data_raw %>%
filter(
CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential","Elec- Commercial","Gas- Commercial")
) %>%
group_by(
YEAR,
MONTH,
CUSTOMERCLASS
) %>%
summarize(
TOTALKBTU = sum(TOTALKBTU, na.rm = T)
) %>%
mutate(
DATE =
paste(
YEAR,
MONTH,
"01",
sep="-"
) %>% as.Date()
)
#line gragh
pge_data %>%
filter(CUSTOMERCLASS %in% c("Elec- Commercial","Gas- Commercial")) %>%
ggplot() +
geom_line(
aes(
x = DATE,
y = TOTALKBTU,
color = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Commercial Yearly Electricity & Gas Usage 2017-2021",
color = "Energy Type"
)
#line gragh
pge_data %>%
filter(CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential")) %>%
ggplot() +
geom_line(
aes(
x = DATE,
y = TOTALKBTU,
color = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Date",
y = "kBTU",
title = "PG&E Residential Yearly Electricity & Gas Usage 2017-2021",
color = "Energy Type"
)
pge_data <-
pge_data_raw %>%
filter(
CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential","Elec- Commercial","Gas- Commercial")
) %>%
group_by(
YEAR,
MONTH,
CUSTOMERCLASS
) %>%
summarize(
TOTALKBTU = sum(TOTALKBTU, na.rm = T)
) %>%
mutate(
DATE =
paste(
YEAR,
MONTH,
"01",
sep="-"
) %>% as.Date()
)
years <- 2019:2021
quarters <- 1:4
types <- c("Electric","Gas")
pge_data_raw <- NULL
for(year in years){
for(quarter in quarters){
for(type in types){
filename <-
paste0(
"PGE_",
year,
"_Q",
quarter,
"_",
type,
"UsageByZip.csv"
)
if(!file.exists(filename)) next
temp <- read_csv(filename)
if(type == "Electric"){
temp<-
temp%>%
#conversion: 1 kWH = 3.41213 kBTU
mutate(TOTALKBTU =  TOTALKWH*3.41214)%>%
select(-TOTALKWH, -AVERAGEKWH)
}
if(type == "Gas") {
temp <-
temp %>%
#conversion: 1 Therm = 99.9761 kBTU
mutate(TOTALKBTU = TOTALTHM * 99.9761) %>%
select(-TOTALTHM, -AVERAGETHM)
}
pge_data_raw <-
rbind(pge_data_raw,temp)
}
}
}
pge_data <-
pge_data_raw %>%
filter(
CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential","Elec- Commercial","Gas- Commercial")
) %>%
group_by(
YEAR,
MONTH,
CUSTOMERCLASS
) %>%
summarize(
TOTALKBTU = sum(TOTALKBTU, na.rm = T)
) %>%
mutate(
DATE =
paste(
YEAR,
MONTH,
"01",
sep="-"
) %>% as.Date()
)
pge_data <-
pge_data_raw %>%
filter(
CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential","Elec- Commercial","Gas- Commercial")
) %>%
group_by(
YEAR,
MONTH,
CUSTOMERCLASS
) %>%
summarize(
TOTALKBTU = sum(TOTALKBTU, na.rm = T)
) %>%
mutate(
DATE =
paste(
YEAR,
MONTH,
"01",
sep="-"
) %>% as.Date()
)
pge_data <-
pge_data_raw %>%
filter(
CUSTOMERCLASS %in% c("Elec- Residential","Gas- Residential","Elec- Commercial","Gas- Commercial")
) %>%
group_by(
YEAR,
MONTH,
CUSTOMERCLASS
) %>%
summarize(
TOTALKBTU = sum(TOTALKBTU, na.rm = T)
) %>%
mutate(
DATE =
paste(
YEAR,
MONTH,
"01",
sep="-"
) %>% as.Date()
)
